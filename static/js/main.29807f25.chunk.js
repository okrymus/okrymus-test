(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{218:function(e,t,a){e.exports=a(448)},448:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(62),s=a.n(o),i=a(467),c=a(468),l=(a(223),a(225),a(43)),u=a(16),m=a(184),d=a(185),p=a.n(d),h=a(186),b=a(461),f=a(458),g=a(459),E=a(460),v="USER_LOGGED_IN",w="USER_LOGGED_OUT",O=a(53),j=a.n(O),y={login:function(e){return j.a.post("/api/auth",{credentials:e}).then(function(e){return e.data.user})},signup:function(e){return j.a.post("/api/users",{user:e}).then(function(e){return e.data.user})},confirm:function(e){return j.a.post("/api/auth/confirmation",{token:e}).then(function(e){return e.data.user})},resetPasswordRequest:function(e){return j.a.post("/api/auth/reset_password_request",{email:e})},validateToken:function(e){return j.a.post("/api/auth/validate_token",{token:e})},resetPassword:function(e){return j.a.post("/api/auth/reset_password",{data:e})}},k=function(e){return{type:v,user:e}},C=function(){return function(e){localStorage.removeItem("okrymusJWT"),e({type:w})}};var S=Object(u.b)(function(e){return{isAuthenticated:!!e.user.token}},{logout:C})(function(){return r.a.createElement(f.a,{fluid:!0,style:{height:"100vh",color:"white",background:"linear-gradient(to right, #692022, #1b1819)"}},r.a.createElement(g.a,{className:"align-items-center justify-content-center text-center",style:{height:"100%"}},r.a.createElement(E.a,{xs:12,sm:6},r.a.createElement("img",{className:"img-fluid",alt:"Adventurers League Logo",src:"http://media.wizards.com/images/dnd/playevents/DnD_ADVL.png"})),r.a.createElement(E.a,{xs:12,sm:6,style:{fontFamily:"'Open Sans', sans-serif"}},r.a.createElement("h1",{style:{boxShadow:"6px 0 0 rgba(20,12,10, .7), -6px 0 0 rgba(20,12,10, .7)",background:"rgba(20,12,10, .7)",lineHeight:"3rem"}},"BECOME AN ADVENTURER!"),r.a.createElement("br",null),r.a.createElement("div",{className:"text-center"},r.a.createElement(b.a,{to:"/signup",className:"btn btn-primary btn-lg",style:{backgroundColor:"#9c0b0e",border:"none"}},"JOIN THE PARTY!")))))}),x=a(19),A=a(20),F=a(22),T=a(21),P=a(23),D=a(37),_=a(35),I=a(462),R=a(464),J=a(466),W=a(189),L=a.n(W),N=function(e){var t=e.text;return r.a.createElement("span",{style:{color:"#ae5856"}},t)},H=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},loading:!1,errors:{}},a.onChange=function(e){return a.setState({data:Object(_.a)({},a.state.data,Object(D.a)({},e.target.name,e.target.value))})},a.onSubmit=function(){var e=a.validate(a.state.data);a.setState({errors:e}),0===Object.keys(e).length&&(a.setState({loading:!0}),a.props.submit(a.state.data).catch(function(e){return a.setState({errors:e.response.data.errors,loading:!1})}))},a.validate=function(e){var t={};return L.a.isEmail(e.email)||(t.email="Invalid email"),e.password||(t.password="Can't be blank"),t},a}return Object(P.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.errors,n=e.loading;return r.a.createElement(I.a,{onSubmit:this.onSubmit,loading:n},a.global&&r.a.createElement(R.a,{negative:!0},r.a.createElement(R.a.Header,null,"Something went wrong"),r.a.createElement("p",null,a.global)),r.a.createElement(I.a.Field,{error:!!a.email},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"example@example.com",value:t.email,onChange:this.onChange}),a.email&&r.a.createElement(N,{text:a.email})),r.a.createElement(I.a.Field,{error:!!a.password},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"Make it secure",value:t.password,onChange:this.onChange}),a.password&&r.a.createElement(N,{text:a.password})),r.a.createElement(J.a,{primary:!0},"Login"))}}]),t}(r.a.Component),M=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).submit=function(e){return a.props.login(e).then(function(){return a.props.history.push("/dashboard")})},a}return Object(P.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h1",null,"Login Page"),r.a.createElement(H,{submit:this.submit}),r.a.createElement(b.a,{to:"/forgot_password"},"Forgot Password?"))}}]),t}(r.a.Component),q=Object(u.b)(null,{login:function(e){return function(t){return y.login(e).then(function(e){localStorage.okrymusJWT=e.token,t(k(e))})}}})(M),G=function(){return r.a.createElement(R.a,{info:!0},r.a.createElement(R.a.Header,null,"Please, verify your email to unlock awesomeness"))};var U=Object(u.b)(function(e){return{isConfirmed:!!e.user.confirmed}})(function(e){var t=e.isConfirmed;return r.a.createElement("div",null,!t&&r.a.createElement(G,null))}),B=a(70),V=a.n(B),Y=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:"",password:""},loading:!1,errors:{}},a.onChange=function(e){return a.setState(Object(_.a)({},a.state,{data:Object(_.a)({},a.state.data,Object(D.a)({},e.target.name,e.target.value))}))},a.onSubmit=function(e){e.preventDefault();var t=a.validate(a.state.data);a.setState({errors:t}),0===Object.keys(t).length&&(a.setState({loading:!0}),a.props.submit(a.state.data).catch(function(e){return a.setState({errors:e.response.data.errors,loading:!1})}))},a.validate=function(e){var t={};return V()(e.email)||(t.email="Invalid email"),e.password||(t.password="Can't be blank"),t},a}return Object(P.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.state,t=e.data,a=e.errors,n=e.loading;return r.a.createElement(I.a,{onSubmit:this.onSubmit,loading:n},r.a.createElement(I.a.Field,{error:!!a.email},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"email@email.com",value:t.email,onChange:this.onChange}),a.email&&r.a.createElement(N,{text:a.email})),r.a.createElement(I.a.Field,{error:!!a.password},r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",value:t.password,onChange:this.onChange}),a.password&&r.a.createElement(N,{text:a.password})),r.a.createElement(J.a,{primary:!0},"Sign Up"))}}]),t}(r.a.Component),z=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).submit=function(e){return a.props.signup(e).then(function(){return a.props.history.push("/dashboard")})},a}return Object(P.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(Y,{submit:this.submit}))}}]),t}(r.a.Component),$=Object(u.b)(null,{signup:function(e){return function(t){return y.signup(e).then(function(e){localStorage.okrymusJWT=e.token,t(k(e))})}}})(z),K=a(101),Q=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,success:!1},a}return Object(P.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.confirm(this.props.match.params.token).then(function(){return e.setState({loading:!1,success:!0})}).catch(function(){return e.setState({loading:!1,success:!1})})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.success;return r.a.createElement("div",null,t&&r.a.createElement(R.a,{icon:!0},r.a.createElement(K.a,{name:"circle notched",loading:!0}),r.a.createElement(R.a.Header,null,"Validating your email")),!t&&a&&r.a.createElement(R.a,{success:!0,icon:!0},r.a.createElement(K.a,{name:"checkmark"}),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,null,"Thank you. Your account has been verified."),r.a.createElement(b.a,{to:"/dashboard"},"Go to your dashboard"))),!t&&!a&&r.a.createElement(R.a,{negative:!0,icon:!0},r.a.createElement(K.a,{name:"warning sign"}),r.a.createElement(R.a.Content,null,r.a.createElement(R.a.Header,null,"Ooops. Invalid token it seems."))))}}]),t}(r.a.Component),X=Object(u.b)(null,{confirm:function(e){return function(t){return y.confirm(e).then(function(e){localStorage.okrymusJWT=e.token,t(k(e))})}}})(Q),Z=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={data:{email:""},loading:!1,errors:{}},a.onChange=function(e){return a.setState(Object(_.a)({},a.state,{data:Object(_.a)({},a.state.data,Object(D.a)({},e.target.name,e.target.value))}))},a.onSubmit=function(e){e.preventDefault();var t=a.validate(a.state.data);a.setState({errors:t}),0===Object.keys(t).length&&(a.setState({loading:!0}),a.props.submit(a.state.data).catch(function(e){return a.setState({errors:e.response.data.errors,loading:!1})}))},a.validate=function(e){var t={};return V()(e.email)||(t.email="Invalid email"),t},a}return Object(P.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.state,t=e.errors,a=e.data,n=e.loading;return r.a.createElement(I.a,{onSubmit:this.onSubmit,loading:n},!!t.global&&r.a.createElement(R.a,{negative:!0},t.global),r.a.createElement(I.a.Field,{error:!!t.email},r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{type:"email",id:"email",name:"email",placeholder:"email",value:a.email,onChange:this.onChange}),t.email&&r.a.createElement(N,{text:t.email})),r.a.createElement(J.a,{primary:!0},"ForgotPasswordForm"))}}]),t}(r.a.Component),ee=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={success:!1},a.submit=function(e){return a.props.resetPasswordRequest(e).then(function(){return a.setState({success:!0})})},a}return Object(P.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,this.state.success?r.a.createElement(R.a,null,"Email has been sent."):r.a.createElement(Z,{submit:this.submit}))}}]),t}(r.a.Component),te=Object(u.b)(null,{resetPasswordRequest:function(e){var t=e.email;return function(){return y.resetPasswordRequest(t)}}})(ee),ae=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={data:{token:a.props.token,password:"",passwordConfirmation:""},loading:!1,errors:{}},a.onChange=function(e){return a.setState(Object(_.a)({},a.state,{data:Object(_.a)({},a.state.data,Object(D.a)({},e.target.name,e.target.value))}))},a.onSubmit=function(e){e.preventDefault();var t=a.validate(a.state.data);a.setState({errors:t}),0===Object.keys(t).length&&(a.setState({loading:!0}),a.props.submit(a.state.data).catch(function(e){return a.setState({errors:e.response.data.errors,loading:!1})}))},a.validate=function(e){var t={};return e.password||(t.password="Can't be blank"),e.password!==e.passwordConfirmation&&(t.password="Passwords must match"),t},a}return Object(P.a)(t,e),Object(A.a)(t,[{key:"render",value:function(){var e=this.state,t=e.errors,a=e.data,n=e.loading;return r.a.createElement(I.a,{onSubmit:this.onSubmit,loading:n},r.a.createElement(I.a.Field,{error:!!t.password},r.a.createElement("label",{htmlFor:"password"},"New Password"),r.a.createElement("input",{type:"password",id:"password",name:"password",placeholder:"your new password",value:a.password,onChange:this.onChange}),t.password&&r.a.createElement(N,{text:t.password})),r.a.createElement(I.a.Field,{error:!!t.passwordConfirmation},r.a.createElement("label",{htmlFor:"passwordConfirmation"},"Confirm your new password"),r.a.createElement("input",{type:"password",id:"passwordConfirmation",name:"passwordConfirmation",placeholder:"type it again, please",value:a.passwordConfirmation,onChange:this.onChange}),t.passwordConfirmation&&r.a.createElement(N,{text:t.passwordConfirmation})),r.a.createElement(J.a,{primary:!0},"Reset"))}}]),t}(r.a.Component),ne=function(e){function t(){var e,a;Object(x.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(F.a)(this,(e=Object(T.a)(t)).call.apply(e,[this].concat(r)))).state={loading:!0,success:!1},a.submit=function(e){return a.props.resetPassword(e).then(function(){return a.props.history.push("/login")})},a}return Object(P.a)(t,e),Object(A.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.validateToken(this.props.match.params.token).then(function(){return e.setState({loading:!1,success:!0})}).catch(function(){return e.setState({loading:!1,success:!1})})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.success,n=this.props.match.params.token;return r.a.createElement("div",null,t&&r.a.createElement(R.a,null,"Loading"),!t&&a&&r.a.createElement(ae,{submit:this.submit,token:n}),!t&&!a&&r.a.createElement(R.a,null,"Invalid Token"))}}]),t}(r.a.Component),re=Object(u.b)(null,{validateToken:function(e){return function(){return y.validateToken(e)}},resetPassword:function(e){return function(){return y.resetPassword(e)}}})(ne),oe=a(102),se=a(469);var ie=Object(u.b)(function(e){return{isAuthenticated:!!e.user.token}})(function(e){var t=e.isAuthenticated,a=e.component,n=Object(oe.a)(e,["isAuthenticated","component"]);return r.a.createElement(c.a,Object.assign({},n,{render:function(e){return t?r.a.createElement(a,e):r.a.createElement(se.a,{to:"/"})}}))});var ce=Object(u.b)(function(e){return{isAuthenticated:!!e.user.token}})(function(e){var t=e.isAuthenticated,a=e.component,n=Object(oe.a)(e,["isAuthenticated","component"]);return r.a.createElement(c.a,Object.assign({},n,{render:function(e){return t?r.a.createElement(se.a,{to:"/dashboard"}):r.a.createElement(a,e)}}))}),le=a(465),ue=a(463),me=a(449),de=a(206),pe=a.n(de);var he=Object(u.b)(function(e){return{user:e.user}},{logout:C})(function(e){var t=e.user,a=e.logout;return r.a.createElement(le.a,{secondary:!0,pointing:!0},r.a.createElement(le.a.Item,{as:b.a,to:"/dashboard"},"Dashboard"),r.a.createElement(le.a.Menu,{position:"right"},r.a.createElement(ue.a,{trigger:r.a.createElement(me.a,{avatar:!0,src:pe()(t.email)})},r.a.createElement(ue.a.Menu,null,r.a.createElement(ue.a.Item,{onClick:function(){return a()}},"Logout")))))});var be=Object(u.b)(function(e){return{isAuthenticated:!!e.user.email}})(function(e){var t=e.location,a=e.isAuthenticated;return r.a.createElement("div",null,a&&r.a.createElement(he,null),r.a.createElement(c.a,{location:t,path:"/",exact:!0,component:S}),r.a.createElement(c.a,{location:t,path:"/confirmation/:token",exact:!0,component:X}),r.a.createElement(ce,{location:t,path:"/login",exact:!0,component:q}),r.a.createElement(ce,{location:t,path:"/signup",exact:!0,component:$}),r.a.createElement(ce,{location:t,path:"/forgot_password",exact:!0,component:te}),r.a.createElement(ce,{location:t,path:"/reset_password/:token",exact:!0,component:re}),r.a.createElement(ie,{location:t,path:"/dashboard",exact:!0,component:U}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var fe=Object(l.combineReducers)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case v:return t.user;case w:return{};default:return e}}}),ge=Object(l.createStore)(fe,Object(h.composeWithDevTools)(Object(l.applyMiddleware)(m.a)));if(localStorage.okrymusJWT){var Ee=p()(localStorage.okrymusJWT),ve={token:localStorage.okrymusJWT,email:Ee.email,confirmed:Ee.confirmed};ge.dispatch(k(ve))}s.a.render(r.a.createElement(i.a,null,r.a.createElement(u.a,{store:ge},r.a.createElement(c.a,{component:be}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[218,2,1]]]);
//# sourceMappingURL=main.29807f25.chunk.js.map